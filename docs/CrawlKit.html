<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Class: CrawlKit</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Class: CrawlKit</h1>

    




<section>

<header>
    
        <h2>CrawlKit</h2>
        
            <div class="class-description">The CrawlKit base class. This is where the magic happens.</div>
        
    
</header>

<article>
    <div class="container-overview">
    
        

    
    <h2>Constructor</h2>
    

    <h4 class="name" id="CrawlKit"><span class="type-signature"></span>new CrawlKit<span class="signature">(url<span class="signature-attributes">opt</span>)</span><span class="type-signature"></span></h4>

    



<div class="description">
    Create a CrawlKit instance
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>url</code></td>
            

            <td class="type">
            
                
<span class="param-type">String</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            

            <td class="description last">The start URL. Sets the <a href="CrawlKit.html#url"><code>CrawlKit#url</code></a>.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="src_index.js.html">src/index.js</a>, <a href="src_index.js.html#line87">line 87</a>
    </li></ul></dd>
    

    

    

    
</dl>
















    
    </div>

    

    

    

     

    

    
        <h3 class="subsection-title">Members</h3>

        
            
<h4 class="name" id="browserCookies"><span class="type-signature">(non-null) </span>browserCookies<span class="type-signature"> :Array.&lt;Object></span></h4>




<div class="description">
    Getter/setter for the cookies to set within PhantomJS.
Each entry is supposed to be an object <a href="http://phantomjs.org/api/webpage/method/add-cookie.html">following the PhantomJS spec</a>.
</div>



    <h5>Type:</h5>
    <ul>
        <li>
            
<span class="param-type">Array.&lt;Object></span>


        </li>
    </ul>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="src_index.js.html">src/index.js</a>, <a href="src_index.js.html#line293">line 293</a>
    </li></ul></dd>
    

    

    

    
</dl>






        
            
<h4 class="name" id="concurrency"><span class="type-signature">(non-null) </span>concurrency<span class="type-signature"> :integer</span></h4>




<div class="description">
    Getter/setter for the concurrency of the crawler.
This controls the amount of PhantomJS instances that will be spawned
and used to work on found websites. Adapt this to the power of your machine.

Values under one are set to one.
</div>



    <h5>Type:</h5>
    <ul>
        <li>
            
<span class="param-type">integer</span>


        </li>
    </ul>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-default">Default Value:</dt>
    <dd class="tag-default"><ul class="dummy">
            <li>1 (No concurrency)</li>
        </ul></dd>
    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="src_index.js.html">src/index.js</a>, <a href="src_index.js.html#line134">line 134</a>
    </li></ul></dd>
    

    

    

    
</dl>






        
            
<h4 class="name" id="followRedirects"><span class="type-signature">(non-null) </span>followRedirects<span class="type-signature"> :boolean</span></h4>




<div class="description">
    Getter/setter for whether to follow redirects or not.
When following redirects, the original page is not processed.
</div>



    <h5>Type:</h5>
    <ul>
        <li>
            
<span class="param-type">boolean</span>


        </li>
    </ul>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-default">Default Value:</dt>
    <dd class="tag-default"><ul class="dummy">
            <li>false</li>
        </ul></dd>
    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="src_index.js.html">src/index.js</a>, <a href="src_index.js.html#line276">line 276</a>
    </li></ul></dd>
    

    

    

    
</dl>






        
            
<h4 class="name" id="phantomPageSettings"><span class="type-signature">(non-null) </span>phantomPageSettings<span class="type-signature"> :Object.&lt;String, *></span></h4>




<div class="description">
    Getter/setter for the map of settings to pass to an opened page.
You can use this for example for Basic Authentication.
For a list of options, please refer to the <a href="http://phantomjs.org/api/webpage/property/settings.html">PhantomJS documentation</a>.
Nested settings can just be provided in dot notation as the key, e.g. 'settings.userAgent'.
</div>



    <h5>Type:</h5>
    <ul>
        <li>
            
<span class="param-type">Object.&lt;String, *></span>


        </li>
    </ul>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="src_index.js.html">src/index.js</a>, <a href="src_index.js.html#line258">line 258</a>
    </li></ul></dd>
    

    

    

    
</dl>






        
            
<h4 class="name" id="phantomParameters"><span class="type-signature">(non-null) </span>phantomParameters<span class="type-signature"> :Object.&lt;String, String></span></h4>




<div class="description">
    Getter/setter for the map of parameters to pass to PhantomJS.
You can use this for example to ignore SSL errors.
For a list of parameters, please refer to the <a href="http://phantomjs.org/api/command-line.html">PhantomJS documentation</a>.
</div>



    <h5>Type:</h5>
    <ul>
        <li>
            
<span class="param-type">Object.&lt;String, String></span>


        </li>
    </ul>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="src_index.js.html">src/index.js</a>, <a href="src_index.js.html#line239">line 239</a>
    </li></ul></dd>
    

    

    

    
</dl>






        
            
<h4 class="name" id="redirectFilter"><span class="type-signature"></span>redirectFilter<span class="type-signature"> :function</span></h4>




<div class="description">
    Getter/setter for the filter that is applied to redirected URLs.
With this filter you can prevent the redirect or rewrite it.
The filter callback gets two arguments. The first one is the target URL
the scond one the source URL.
Return false for preventing the redirect. Return a String (URL) to follow the redirect.
</div>



    <h5>Type:</h5>
    <ul>
        <li>
            
<span class="param-type">function</span>


        </li>
    </ul>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="src_index.js.html">src/index.js</a>, <a href="src_index.js.html#line316">line 316</a>
    </li></ul></dd>
    

    

    

    
</dl>






        
            
<h4 class="name" id="timeout"><span class="type-signature">(non-null) </span>timeout<span class="type-signature"> :integer</span></h4>




<div class="description">
    Getter/setter for overall timeout for one website processing (opening page, evaluating runners and finder functions).
The timeout starts fresh for each website.

Values under zero are set to zero.
</div>



    <h5>Type:</h5>
    <ul>
        <li>
            
<span class="param-type">integer</span>


        </li>
    </ul>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-default">Default Value:</dt>
    <dd class="tag-default"><ul class="dummy">
            <li>30000 (30 seconds)</li>
        </ul></dd>
    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="src_index.js.html">src/index.js</a>, <a href="src_index.js.html#line113">line 113</a>
    </li></ul></dd>
    

    

    

    
</dl>






        
            
<h4 class="name" id="tries"><span class="type-signature">(non-null) </span>tries<span class="type-signature"> :integer</span></h4>




<div class="description">
    Getter/setter for the number of tries when a PhantomJS instance crashes on a page
or <a href="CrawlKit.html#timeout"><code>CrawlKit#timeout</code></a> is hit.
When a PhantomJS instance crashes whilst crawling a webpage, this instance is shutdown
and replaced by a new one. By default the webpage that failed in such a way will be
re-queued.
If the finders and runners did not respond within the defined timeout,
it will be tried to run them again as well.
This member controls how often that re-queueing happens.

Values under zero are set to zero.
</div>



    <h5>Type:</h5>
    <ul>
        <li>
            
<span class="param-type">integer</span>


        </li>
    </ul>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-default">Default Value:</dt>
    <dd class="tag-default"><ul class="dummy">
            <li>3 (read: try two more times after the first failure, three times in total)</li>
        </ul></dd>
    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="src_index.js.html">src/index.js</a>, <a href="src_index.js.html#line194">line 194</a>
    </li></ul></dd>
    

    

    

    
</dl>






        
            
<h4 class="name" id="url"><span class="type-signature"></span>url<span class="type-signature"> :String</span></h4>




<div class="description">
    Getter/setter for the start URL of the crawler.
This is the URL that will be used as an initial endpoint for the crawler.
If the protocol is omitted (e.g. URL starts with //), the URL will be rewritten to http://
</div>



    <h5>Type:</h5>
    <ul>
        <li>
            
<span class="param-type">String</span>


        </li>
    </ul>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="src_index.js.html">src/index.js</a>, <a href="src_index.js.html#line151">line 151</a>
    </li></ul></dd>
    

    

    

    
</dl>






        
    

    
        <h3 class="subsection-title">Methods</h3>

        
            

    

    <h4 class="name" id="addRunner"><span class="type-signature"></span>addRunner<span class="signature">(key<span class="signature-attributes">non-null</span>, runner<span class="signature-attributes">non-null</span>, &hellip;runnableParams<span class="signature-attributes">opt</span>)</span><span class="type-signature"></span></h4>

    



<div class="description">
    Allows you to add a runner that is executed on each crawled page.
The returned value of the runner is added to the overall result.
Runners run sequentially on each webpage in the order they were added.
If a runner is crashing PhantomJS more than <a href="CrawlKit.html#tries"><code>CrawlKit#tries</code></a> times, subsequent <a href="Runner.html"><code>Runner</code></a>s are not executed.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>key</code></td>
            

            <td class="type">
            
                
<span class="param-type">String</span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            

            <td class="description last">The runner identificator. This is also used in the result stream/object.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>runner</code></td>
            

            <td class="type">
            
                
<span class="param-type"><a href="Runner.html">Runner</a></span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            

            <td class="description last">The runner instance to use for discovery.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>runnableParams</code></td>
            

            <td class="type">
            
                
<span class="param-type">*</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                    &lt;repeatable><br>
                
                </td>
            

            

            <td class="description last">These parameters are passed to the function returned by <a href="Runner.html#getRunnable"><code>Runner#getRunnable</code></a> at evaluation time.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="src_index.js.html">src/index.js</a>, <a href="src_index.js.html#line216">line 216</a>
    </li></ul></dd>
    

    

    
    <dt class="tag-see">See:</dt>
    <dd class="tag-see">
        <ul>
            <li>For an example see `examples/simple.js`. For an example using parameters, see `examples/advanced.js`.</li>
        </ul>
    </dd>
    

    
</dl>
















        
            

    

    <h4 class="name" id="crawl"><span class="type-signature"></span>crawl<span class="signature">(shouldStream<span class="signature-attributes">opt</span>)</span><span class="type-signature"> &rarr; {Stream|Promise.&lt;Object>}</span></h4>

    



<div class="description">
    This method starts the crawling/scraping process.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        
        <th>Default</th>
        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>shouldStream</code></td>
            

            <td class="type">
            
                
<span class="param-type">boolean</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                    false
                
                </td>
            

            <td class="description last">Whether to stream the results or use a Promise</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="src_index.js.html">src/index.js</a>, <a href="src_index.js.html#line336">line 336</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    By default a Promise object is returned that resolves to the result. If streaming is enabled it returns a JSON stream of the results.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Stream</span>
|

<span class="param-type">Promise.&lt;Object></span>


    </dd>
</dl>

    



        
            

    

    <h4 class="name" id="setFinder"><span class="type-signature"></span>setFinder<span class="signature">(finder<span class="signature-attributes">non-null</span>, &hellip;runnableParams<span class="signature-attributes">opt</span>)</span><span class="type-signature"></span></h4>

    



<div class="description">
    With this method a <a href="Finder.html"><code>Finder</code></a> instance can be set for the crawler.
A finder is used for link discovery on a website. It is run directly after page load
and is optional (e.g. if you want to only work on a single page).
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>finder</code></td>
            

            <td class="type">
            
                
<span class="param-type"><a href="Finder.html">Finder</a></span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            

            <td class="description last">The finder instance to use for discovery.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>runnableParams</code></td>
            

            <td class="type">
            
                
<span class="param-type">*</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                    &lt;repeatable><br>
                
                </td>
            

            

            <td class="description last">These parameters are passed to the function returned by <a href="Finder.html#getRunnable"><code>Finder#getRunnable</code></a> at evaluation time.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="src_index.js.html">src/index.js</a>, <a href="src_index.js.html#line170">line 170</a>
    </li></ul></dd>
    

    

    

    
</dl>
















        
    

    

    
</article>

</section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="finders.module_genericAnchors.html">genericAnchors</a></li></ul><h3>Classes</h3><ul><li><a href="CrawlKit.html">CrawlKit</a></li></ul><h3>Interfaces</h3><ul><li><a href="Finder.html">Finder</a></li><li><a href="Runnable.html">Runnable</a></li><li><a href="Runner.html">Runner</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.0</a> on Tue Dec 08 2015 12:33:45 GMT+1100 (AEDT)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>